import{r as _,w as q,u as N,a as R,o as g,c as w,b as l,d as e,e as d,f as t,g as f,h as z,E as b,l as A,i as C,m as v,p as F,j as M}from"./index-emjJvSev.js";import{E as P,a as T}from"./el-col-DIjoE-t_.js";import{E as j}from"./el-checkbox-BDL51avq.js";import{E as L,a as D}from"./el-form-item-DMk5JWWu.js";import{E as G}from"./el-link-GSOuVepx.js";import{_ as H,E as J}from"./_plugin-vue_export-helper-BNTiEJfs.js";import{E as K}from"./el-input-B6-11vVw.js";import"./error-BOtGHGig.js";import"./isEqual-DAsfhZW4.js";import"./_baseClone-DkDu17N4.js";const x=p=>(F("data-v-ffd00553"),p=p(),M(),p),O=x(()=>f("div",{class:"title"},"云 日 记",-1)),Q=x(()=>f("h1",null,"注 册",-1)),W=x(()=>f("h1",null,"登 录",-1)),X={class:"flex"},Y={__name:"index",setup(p){const u=_(!1),i=_(),s=_({username:"",password:"",repassword:""}),V={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{pattern:/^\S{5,10}$/,message:"用户名必须是 5-10位 的非空字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码必须是 6-15位 的非空字符",trigger:"blur"}],repassword:[{required:!0,message:"请再次输入密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码必须是 6-15位 的非空字符",trigger:"blur"},{validator:(m,a,o)=>{a!==s.value.password?o(new Error("两次输入的密码不一致")):o()},trigger:"blur"}]},h=async()=>{await i.value.validate(),await z(s.value),b({message:"注册成功",type:"success",plain:!0,showClose:!0}),u.value=!1};q(u,()=>{s.value={username:"",password:"",repassword:""}});const I=N(),S=R(),U=async()=>{await i.value.validate();const m=await A(s.value);I.setToken(m.data.token),b({message:"登录成功",type:"success",plain:!0,showClose:!0}),S.push("/")};return(m,a)=>{const o=L,n=K,E=J,c=G,k=D,$=j,y=T,B=P;return g(),w(B,{class:"login-page"},{default:l(()=>[e(y,{span:6,offset:3,class:"form"},{default:l(()=>[O,u.value?(g(),w(k,{key:0,ref_key:"form",ref:i,size:"large",autocomplete:"off",model:s.value,rules:V,"status-icon":""},{default:l(()=>[e(o,null,{default:l(()=>[Q]),_:1}),e(o,{prop:"username"},{default:l(()=>[e(n,{"prefix-icon":d(C),placeholder:"请输入用户名",modelValue:s.value.username,"onUpdate:modelValue":a[0]||(a[0]=r=>s.value.username=r)},null,8,["prefix-icon","modelValue"])]),_:1}),e(o,{prop:"password"},{default:l(()=>[e(n,{"prefix-icon":d(v),type:"password",placeholder:"请输入密码",modelValue:s.value.password,"onUpdate:modelValue":a[1]||(a[1]=r=>s.value.password=r)},null,8,["prefix-icon","modelValue"])]),_:1}),e(o,{prop:"repassword"},{default:l(()=>[e(n,{"prefix-icon":d(v),type:"password",placeholder:"请再次输入密码",modelValue:s.value.repassword,"onUpdate:modelValue":a[2]||(a[2]=r=>s.value.repassword=r)},null,8,["prefix-icon","modelValue"])]),_:1}),e(o,null,{default:l(()=>[e(E,{class:"button",plain:"",color:"#e13d86","auto-insert-space":"",onClick:h},{default:l(()=>[t(" 注册 ")]),_:1})]),_:1}),e(o,{class:"flex"},{default:l(()=>[e(c,{type:"danger",underline:!1,onClick:a[3]||(a[3]=r=>u.value=!1)},{default:l(()=>[t(" ◁ 返回 ")]),_:1})]),_:1})]),_:1},8,["model"])):(g(),w(k,{key:1,ref_key:"form",ref:i,size:"large",autocomplete:"off",model:s.value,rules:V,"status-icon":""},{default:l(()=>[e(o,null,{default:l(()=>[W]),_:1}),e(o,{prop:"username"},{default:l(()=>[e(n,{"prefix-icon":d(C),placeholder:"请输入用户名",modelValue:s.value.username,"onUpdate:modelValue":a[4]||(a[4]=r=>s.value.username=r)},null,8,["prefix-icon","modelValue"])]),_:1}),e(o,{prop:"password"},{default:l(()=>[e(n,{name:"password","prefix-icon":d(v),type:"password",placeholder:"请输入密码",modelValue:s.value.password,"onUpdate:modelValue":a[5]||(a[5]=r=>s.value.password=r)},null,8,["prefix-icon","modelValue"])]),_:1}),e(o,{class:"flex"},{default:l(()=>[f("div",X,[e($,null,{default:l(()=>[t("记住我")]),_:1}),e(c,{type:"danger",underline:!1},{default:l(()=>[t("忘记密码?")]),_:1})])]),_:1}),e(o,null,{default:l(()=>[e(E,{class:"button",plain:"",color:"#e13d86","auto-insert-space":"",onClick:U},{default:l(()=>[t(" 登录 ")]),_:1})]),_:1}),e(o,{class:"flex"},{default:l(()=>[e(c,{type:"danger",underline:!1,onClick:a[6]||(a[6]=r=>u.value=!0)},{default:l(()=>[t(" 注册 ▷ ")]),_:1})]),_:1})]),_:1},8,["model"]))]),_:1}),e(y,{span:12,offset:2,class:"bg"})]),_:1})}}},de=H(Y,[["__scopeId","data-v-ffd00553"]]);export{de as default};
