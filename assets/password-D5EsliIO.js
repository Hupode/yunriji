import{_ as V}from"./PageContainer-g3Xq4fWS.js";import{u as k,a as S,r as _,o as y,c as U,b as r,d as e,f as m,bZ as x,E as C}from"./index-emjJvSev.js";import{a as F,E as I}from"./el-col-DIjoE-t_.js";import{E as N,a as R}from"./el-form-item-DMk5JWWu.js";import{E as h}from"./_plugin-vue_export-helper-BNTiEJfs.js";import{E as q}from"./el-input-B6-11vVw.js";import"./error-BOtGHGig.js";import"./_baseClone-DkDu17N4.js";const G=Object.assign({name:"UserAvatar"},{__name:"password",setup(B){const u=k(),i=S(),l=_({old_pwd:"",new_pwd:"",re_pwd:""}),w={old_pwd:[{required:!0,message:"请输入密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"必须是 6-15位 的非空字符",trigger:"blur"}],new_pwd:[{required:!0,message:"请输入新密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"必须是 6-15位 的非空字符",trigger:"blur"},{validator:(d,o,t)=>{o===l.value.old_pwd?t(new Error("原密码和新密码不能一样")):t()},trigger:"blur"}],re_pwd:[{required:!0,message:"请再次输入新密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"必须是 6-15位 的非空字符",trigger:"blur"},{validator:(d,o,t)=>{o!==l.value.new_pwd?t(new Error("两次输入的新密码不一致")):t()},trigger:"blur"}]},n=_(),c=async()=>{await n.value.validate(),await x(l.value),C({message:"修改成功",type:"success",plain:!0,showClose:!0}),u.delToken(),u.setUserInfo({}),i.push("/login")},f=()=>n.value.resetFields();return(d,o)=>{const t=q,s=N,p=h,g=R,v=F,b=I,E=V;return y(),U(E,{title:"密 码"},{default:r(()=>[e(b,null,{default:r(()=>[e(v,{span:12},{default:r(()=>[e(g,{model:l.value,rules:w,ref_key:"formRef",ref:n,"label-width":"100px",size:"large"},{default:r(()=>[e(s,{label:"原密码 :",prop:"old_pwd"},{default:r(()=>[e(t,{modelValue:l.value.old_pwd,"onUpdate:modelValue":o[0]||(o[0]=a=>l.value.old_pwd=a),type:"password"},null,8,["modelValue"])]),_:1}),e(s,{label:"新密码 :",prop:"new_pwd"},{default:r(()=>[e(t,{modelValue:l.value.new_pwd,"onUpdate:modelValue":o[1]||(o[1]=a=>l.value.new_pwd=a),type:"password"},null,8,["modelValue"])]),_:1}),e(s,{label:"确认新密码 :",prop:"re_pwd"},{default:r(()=>[e(t,{modelValue:l.value.re_pwd,"onUpdate:modelValue":o[2]||(o[2]=a=>l.value.re_pwd=a),type:"password"},null,8,["modelValue"])]),_:1}),e(s,null,{default:r(()=>[e(p,{onClick:c,plain:"",color:"#e13d86"},{default:r(()=>[m("修 改")]),_:1}),e(p,{onClick:f,plain:""},{default:r(()=>[m("重 置")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})]),_:1})}}});export{G as default};
